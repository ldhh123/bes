<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>修改密码</title>
<link href="../css/style.css" rel="stylesheet" type="text/css" />
<link href="../css/default.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../js/jquery-1.8.1.min.js"></script>
</head>
<body>
<div class="opt_cont">
  <div class="opt_lanbar"><a href="welcome.html">首页</a> &gt; 修改密码</div>
  <div class="form_box">
    <form id="userform" method="post">
      <div class="input_box">
        <label><strong>*</strong>旧密码：</label>
        <input name="oldpassword" type="password" />
        <div class="alt_box" id="msg_oldpassword">旧密码不能为空！</div>
      </div>
      <div class="input_box">
        <label><strong>*</strong>密码：</label>
        <input name="password" type="password" />
        <div class="alt_box" id="msg_password">密码不能为空！</div>
      </div>
      <div class="input_box">
        <label><strong>*</strong>确认密码：</label>
        <input name="password2" type="password" />
        <div class="alt_box">请确认密码！</div>
      </div>
      <div class="button_box">
        <input type="submit" value="提交" />
        <input type="button" value="返回" />
      </div>
    </form>
  </div>
</div>
<script type="text/javascript">
$(function(){
	$(".alt_box").css("display","none");
	
	$("#userform").submit(function(){
		$(".alt_box").css("display","none");
		
		var oldpassword = $("[name='oldpassword']").val();
		if($.trim(oldpassword)==""){
			$("#msg_oldpassword").css("display","block");
			$("[name='oldpassword']").select();
			return false;
		}
		
		var password = $("[name='password']").val();
		if($.trim(password)==""){
			$("#msg_password").css("display","block");
			$("[name='password']").select();
			return false;
		}
		
		var password2 = $("[name='password2']").val();
		if($.trim(password2)==""){
			$("#msg_password2").css("display","block");
			$("[name='password2']").select();
			return false;
		}
		
		if(password != password2){
			$("#msg_password").text("两次密码输入不一致！");
			$("#msg_password").css("display","block");
			$("[name='password']").select();
			return false;
		}
		
		if(oldpassword == password2){
			$("#msg_password").text("旧密码与新密码相同！");
			$("#msg_password").css("display","block");
			$("[name='password']").select();
			return false;
		}
		
		$("input[type='submit']").attr("disabled","disabled");
		
		$("#userform").attr("action","index.html");
		return false;
	});
	
	$("input[value='返回']").click(function(){
		window.location.href = "welcome.html";
	});
});
</script>
</body>
</html>
